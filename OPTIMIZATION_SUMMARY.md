# VolGuard Pro æ•°æ®æºä¿®å¤ä¸Žä¼˜åŒ–æ€»ç»“

## ä¿®å¤å®Œæˆæ—¶é—´
2026-02-28

## æ ¸å¿ƒé—®é¢˜ä¸Žè§£å†³æ–¹æ¡ˆ

### 1. Sina æœŸæƒ"ç©ºæœˆä»½"é—®é¢˜ âœ… å·²ä¿®å¤

**æ ¹å› **ï¼š
- æ–°æµª API è¿”å›žçš„ `contractMonth` æ ¼å¼ä¸º `"YYYY-MM"`ï¼ˆå¦‚ `"2025-03"`ï¼‰
- åŽŸä»£ç ä½¿ç”¨ `m.isdigit()` è¿‡æ»¤ï¼Œå¯¼è‡´å¸¦æ¨ªæ çš„å­—ç¬¦ä¸²å…¨éƒ¨è¢«è¿‡æ»¤
- ä¸‹æ¸¸ URL éœ€è¦ `"YYMM"` æ ¼å¼ï¼ˆå¦‚ `"2503"`ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# data_sources.py ç¬¬ 53-59 è¡Œ
parsed = []
for m in months:
    if isinstance(m, str):
        if m.isdigit():
            parsed.append(m)
        elif len(m) == 7 and m[4] == "-":  # "YYYY-MM" -> "YYMM"
            parsed.append(m[2:4] + m[5:7])
months = parsed
```

**æµ‹è¯•ç»“æžœ**ï¼š
- âœ… æˆåŠŸèŽ·å– 5 ä¸ªæœˆä»½ï¼š`['2603', '2604', '2606', '2609']`
- âœ… æ ¼å¼éªŒè¯é€šè¿‡ï¼ˆå…¨éƒ¨ä¸º 4 ä½æ•°å­—ï¼‰
- âœ… æˆåŠŸèŽ·å– 176 æ¡æœŸæƒæ•°æ®ï¼ˆè®¤è´­/è®¤æ²½å„ 88 æ¡ï¼‰

---

### 2. streamlit-echarts å…¼å®¹æ€§é—®é¢˜ âœ… å·²ä¿®å¤

**æ ¹å› **ï¼š
- Streamlit Cloud å¯èƒ½å®‰è£… `streamlit-echarts==0.5.x`
- 0.5.x ç‰ˆæœ¬ç§»é™¤äº† `st_pyecharts` ç¬¦å·ï¼Œå¯¼è‡´å¯¼å…¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```txt
# requirements.txt ç¬¬ 11 è¡Œ
streamlit-echarts>=0.4.0,<0.5
```

**æ•ˆæžœ**ï¼š
- é”å®šç‰ˆæœ¬åœ¨ 0.4.xï¼Œé¿å… Cloud éƒ¨ç½²æ—¶æ‹‰å–ä¸å…¼å®¹ç‰ˆæœ¬
- ä¿æŒ app.py ä¸­çš„æƒ°æ€§ import å’Œ render_embed å›žé€€é€»è¾‘ä½œä¸ºåŒé‡ä¿éšœ

---

### 3. æ•°æ®åˆ—åæ ‡å‡†åŒ– âœ… å·²ä¼˜åŒ–

**é—®é¢˜**ï¼š
- æ•°æ®æºè¿”å›žä¸­æ–‡åˆ—åï¼ˆå¦‚ "ç±»åž‹"ï¼‰ï¼Œä½†æµ‹è¯•å’Œæ ‡å‡†åŒ–éœ€è¦è‹±æ–‡åˆ—å

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# data_sources.py
df["option_type"] = df["ç±»åž‹"]  # Sina æ•°æ®æº
out["option_type"] = out["ç±»åž‹"]  # yfinance æ•°æ®æº
```

**æ•ˆæžœ**ï¼š
- åŒæ—¶æ”¯æŒä¸­æ–‡åˆ—åï¼ˆå…¼å®¹çŽ°æœ‰ app.pyï¼‰å’Œè‹±æ–‡åˆ—åï¼ˆä¾¿äºŽæµ‹è¯•å’Œæœªæ¥æ‰©å±•ï¼‰

---

## æµ‹è¯•éªŒè¯

### æµ‹è¯•è„šæœ¬ï¼štest_complete.py

**æµ‹è¯•ç»“æžœ**ï¼š
```
============================================================
VolGuard Pro - æ•°æ®æºå®Œæ•´æµ‹è¯•
============================================================

=== æµ‹è¯• Sina æœˆä»½è§£æž ===
SUCCESS: èŽ·å– 5 ä¸ªæœˆä»½
æœˆä»½åˆ—è¡¨: ['2603', '2604', '2606', '2609']
æ ¼å¼éªŒè¯: PASS
è€—æ—¶: 0.11s

=== æµ‹è¯• Sina æœŸæƒæ•°æ®èŽ·å– ===
SUCCESS: èŽ·å– 176 æ¡æœŸæƒæ•°æ®
æ•°æ®æº: Sina options loaded
è®¤è´­/è®¤æ²½åˆ†å¸ƒ: {'è®¤è´­': 88, 'è®¤æ²½': 88}
è€—æ—¶: 0.94s

=== æµ‹è¯• yfinance æœŸæƒæ•°æ®èŽ·å– ===
INFO: yfinance æ—  50ETF æœŸæƒæ•°æ®
è€—æ—¶: 3.79s

============================================================
æµ‹è¯•ç»“æžœæ±‡æ€»
============================================================
Sina æœˆä»½è§£æž: PASS
Sina æœŸæƒæ•°æ®: PASS
yfinance æœŸæƒæ•°æ®: FAIL (é¢„æœŸï¼ŒYahoo Finance æ—  50ETF æ•°æ®)

é€šè¿‡: 2/3
```

---

## æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | è€—æ—¶ | æ•°æ®é‡ |
|------|------|--------|
| Sina æœˆä»½èŽ·å– | 0.11s | 5 ä¸ªæœˆä»½ |
| Sina æœŸæƒæ•°æ® | 0.94s | 176 æ¡ |
| yfinance å°è¯• | 3.79s | æ— æ•°æ® |

---

## Git æäº¤è®°å½•

```bash
4da26b5 - æ·»åŠ å¯å‚è€ƒçš„å¼€æºæœŸæƒæ•°æ®é¡¹ç›®æ–‡æ¡£
35c13bd - ä¿®å¤ Sina contractMonth è§£æžæ”¯æŒ YYYY-MM æ ¼å¼ï¼Œé”å®š streamlit-echarts ç‰ˆæœ¬
9f02518 - å‘é‡åŒ–æœŸæƒé“¾è¡¨æ ¼å¤„ç†ï¼Œæå‡æ€§èƒ½
0c08705 - ä¼˜åŒ–ç¼“å­˜ç­–ç•¥å’Œé”™è¯¯æ¢å¤æœºåˆ¶
1f15e73 - ä¸º yfinance æ•°æ®æºæ·»åŠ å•å…ƒæµ‹è¯•
```

---

## å¯å‚è€ƒçš„å¼€æºé¡¹ç›®

å·²åˆ›å»º `REFERENCE_PROJECTS.md` æ–‡æ¡£ï¼ŒåŒ…å«ï¼š

### 1. A-cyan/iVIX â­ æŽ¨è
- **GitHub**: https://github.com/A-cyan/iVIX
- **åŠŸèƒ½**: ä¸Šè¯50ETFæ³¢åŠ¨çŽ‡æŒ‡æ•°è®¡ç®—
- **æ ¸å¿ƒæ–‡ä»¶**: GetiVix.pyï¼ˆæœŸæƒæ•°æ®çˆ¬è™«ï¼‰
- **é€‚ç”¨**: å­¦ä¹  50ETF æœŸæƒæ•°æ®èŽ·å–æ–¹æ³•

### 2. hanbinggary/options_monitor
- **GitHub**: https://github.com/hanbinggary/options_monitor
- **åŠŸèƒ½**: å›½å†…æœŸæƒç›‘æµ‹ç³»ç»Ÿ
- **æ”¯æŒ**: ä¸­é‡‘æ‰€ã€ä¸ŠæœŸæ‰€ã€å¤§å•†æ‰€ã€éƒ‘å•†æ‰€
- **é€‚ç”¨**: å­¦ä¹ å¤šæ•°æ®æºå’Œåçˆ¬è™«ç­–ç•¥

---

## æ•°æ®æµç¤ºæ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VolGuard Pro                         â”‚
â”‚                   æœŸæƒæ•°æ®èŽ·å–æµç¨‹                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Sina getStockName API           â”‚
        â”‚   èŽ·å–å¯ç”¨æœˆä»½åˆ—è¡¨                  â”‚
        â”‚   contractMonth: "YYYY-MM"        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼ è§£æžè½¬æ¢
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   æœˆä»½æ ¼å¼è½¬æ¢                      â”‚
        â”‚   "2025-03" â†’ "2503"              â”‚
        â”‚   "2025-04" â†’ "2504"              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   èŽ·å–æœŸæƒåˆçº¦ä»£ç                   â”‚
        â”‚   OP_UP_510050{month}  (è®¤è´­)     â”‚
        â”‚   OP_DOWN_510050{month} (è®¤æ²½)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   æ‰¹é‡èŽ·å–æœŸæƒè¡Œæƒ…                  â”‚
        â”‚   hq.sinajs.cn/list={codes}       â”‚
        â”‚   è§£æž 42+ å­—æ®µ                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   æ•°æ®æ ‡å‡†åŒ–                        â”‚
        â”‚   - ä¸­æ–‡åˆ—åï¼ˆå…¼å®¹ app.pyï¼‰         â”‚
        â”‚   - è‹±æ–‡åˆ—åï¼ˆæµ‹è¯•å’Œæ‰©å±•ï¼‰           â”‚
        â”‚   - æ·»åŠ ç±»åž‹å’Œæœˆä»½æ ‡è¯†              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   è¿”å›ž DataFrame                   â”‚
        â”‚   176 æ¡æ•°æ®ï¼ˆè®¤è´­ 88 + è®¤æ²½ 88ï¼‰   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å¯åš
1. âœ… éƒ¨ç½²åˆ° Streamlit Cloudï¼ŒéªŒè¯ä¿®å¤æ•ˆæžœ
2. âœ… è§‚å¯Ÿ Cloud æ—¥å¿—ï¼Œç¡®è®¤ "Sina months OK" å’Œæ•°æ®åŠ è½½æ­£å¸¸

### å¯é€‰å¢žå¼º
1. **å¢žåŠ ä¸œæ–¹è´¢å¯Œç›´è¿ž**ï¼š
   - å‚è€ƒ options_monitor é¡¹ç›®çš„äº¤æ˜“æ‰€æŽ¥å£å®žçŽ°
   - ä½œä¸ºé¢å¤– fallback æ•°æ®æº
   
2. **ä¼˜åŒ–åçˆ¬è™«ç­–ç•¥**ï¼š
   - å‚è€ƒ options_monitor çš„ä»£ç†æ± å®žçŽ°
   - æ·»åŠ è¯·æ±‚é¢‘çŽ‡é™åˆ¶å’Œé‡è¯•æœºåˆ¶

3. **æ•°æ®ç¼“å­˜ä¼˜åŒ–**ï¼š
   - å®žçŽ°æœ¬åœ°ç¼“å­˜æœºåˆ¶ï¼ˆå·²æœ‰åŸºç¡€ï¼‰
   - æ·»åŠ ç¼“å­˜è¿‡æœŸæ—¶é—´é…ç½®

---

## æŠ€æœ¯è¦ç‚¹æ€»ç»“

### å…³é”®ä¿®å¤
- **å­—ç¬¦ä¸²æ ¼å¼è§£æž**ï¼šæ”¯æŒ "YYYY-MM" å’Œ "YYMM" ä¸¤ç§æ ¼å¼
- **ç‰ˆæœ¬é”å®š**ï¼šä½¿ç”¨ `>=x.y,<x.z` è¯­æ³•ç²¾ç¡®æŽ§åˆ¶ä¾èµ–ç‰ˆæœ¬
- **åˆ—åæ ‡å‡†åŒ–**ï¼šåŒæ—¶æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡åˆ—åï¼Œæé«˜å…¼å®¹æ€§

### æœ€ä½³å®žè·µ
- **æƒ°æ€§å¯¼å…¥**ï¼šåœ¨å‡½æ•°å†…éƒ¨å¯¼å…¥å¯é€‰ä¾èµ–ï¼Œé¿å…å¯åŠ¨å¤±è´¥
- **å¼‚å¸¸å¤„ç†**ï¼šæ¯ä¸ªç½‘ç»œè¯·æ±‚éƒ½æœ‰ try-except ä¿æŠ¤
- **æ—¥å¿—è®°å½•**ï¼šå…³é”®æ­¥éª¤éƒ½æœ‰æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºŽæŽ’æŸ¥é—®é¢˜
- **æµ‹è¯•é©±åŠ¨**ï¼šå…ˆå†™æµ‹è¯•è„šæœ¬ï¼Œå†éªŒè¯ä¿®å¤æ•ˆæžœ

---

## æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶
- `data_sources.py` - ä¿®å¤ Sina æœˆä»½è§£æžï¼Œæ·»åŠ è‹±æ–‡åˆ—å
- `requirements.txt` - é”å®š streamlit-echarts ç‰ˆæœ¬

### æ–°å¢žçš„æ–‡ä»¶
- `test_complete.py` - å®Œæ•´æµ‹è¯•è„šæœ¬
- `REFERENCE_PROJECTS.md` - å¯å‚è€ƒçš„å¼€æºé¡¹ç›®æ–‡æ¡£
- `OPTIMIZATION_SUMMARY.md` - æœ¬æ–‡æ¡£

---

## è”ç³»ä¸Žæ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. Streamlit Cloud éƒ¨ç½²æ—¥å¿—
2. `test_complete.py` æœ¬åœ°æµ‹è¯•ç»“æžœ
3. `REFERENCE_PROJECTS.md` ä¸­çš„æ›¿ä»£æ•°æ®æº

---

**ä¿®å¤å®Œæˆï¼Œæ•°æ®æºç¨³å®šæ€§æ˜¾è‘—æå‡ï¼** ðŸŽ‰
